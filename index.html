<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>SKunq Chat</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="node_modules/normalize.css/normalize.css" />
	<link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="node_modules/font-awesome/css/font-awesome.min.css" />
	<link rel="stylesheet" href="assets/css/sk_styles.css" />
</head>
<body>
	
	<div id="mobile-menu-btn"><i class="fa fa-chevron-circle-right"></i></div>

	<div id="create-chat-modal" class="modal fade">
		<div class="modal-dialog">
			<div class="panel">
				<div class="panel-body text-center no-select">
				</div>
			</div>
		</div>
	</div>

	<div id="login-screen" class="shade loading">
		<div id="sk_loader" class="shade">
			<div class="loader white"></div>
		</div>
		<canvas id="login-bars"></canvas>
		<div id="login-panel" class="panel">
			<div class="panel-body text-center">
				<h3>Welcome to SKunq Chat</h3>
				<div class="input-group">
					<input type="text" placeholder="what's your name?" class="form-control" id="login-input"/>
					<span class="input-group-btn">
						<button id="login-btn" class="btn btn-info">Login</button>
					</span>
				</div>
			</div>
		</div>
	</div>

	<div id="chat-platform" class="hide">
		<section id="left" class="no-select">
			<div id="user-block"></div>
			<div id="list-block">
				<ul class="nav nav-tabs" role="tablist">
					<li class="nav-item active">
						<a id="chats-tab" class="nav-link" data-toggle="tab" href="#chats-nav" role="tab">
							<i class="fa fa-comments-o"></i>
						</a>
					</li>
					<li class="nav-item ">
						<a id="friends-tab" class="nav-link" data-toggle="tab" href="#friends-nav" role="tab">
							<i class="fa fa-address-book-o"></i>
						</a>
					</li>
				</ul>
				<div id="list-panes" class="tab-content">
					<div id="chats-nav" class="tab-pane active fade in"></div>
					<div id="friends-nav" class="tab-pane fade"></div>
				</div>
				<div id="new-chat-btn" class="btn" data-toggle="modal" data-target="#create-chat-modal">
					<i class="fa fa-plus-square-o"></i> New Chat
				</div>
			</div>
		</section>
		<section id="main" class="tab-content">
			<div id="profile-pane" class="tab-pane"></div>
			<div id="chat-pane" class="tab-pane active"></div>
		</section>
	</div>

	<!-- ============================= -->
	<!-- Libraries -->
	<script src="node_modules/jquery/dist/jquery.min.js"></script>
	<script src="node_modules/underscore/underscore-min.js"></script>
	<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="node_modules/async/dist/async.min.js"></script>
	<script src="node_modules/handlebars/dist/handlebars.min.js"></script>

	<script src="node_modules/backbone/backbone-min.js"></script>
	
	<!-- Scripts -->
	<script src="index.js"></script>
	<script src="scripts/main.js"></script>
	<script src="scripts/router.js"></script>

	<!-- TEMPLATES > TO BE MOVED TO EXTERNALS -->

	<!-- Left Nav Column Templates -->

	<script id="userBlockTemplate" type="text/html">
		<span class="user-name"><%= display_name %></span>
		<div class="user-avatar">
			<% if ( avatar ) { %>
				<img src="<%= avatar %>"/>
			<% } else { %>
				<img src="assets/images/no_avatar.png"/>
			<% } %>
		</div>
	</script>

	<script id="listItemTemplate" type="text/html">
		<div class="item-avatar">
			<% if ( avatar ) { %>
				<img src="<%= avatar %>"/>
			<% } else { %>
				<img src="assets/images/no_avatar.png"/>
			<% } %>
		</div>
		<span class="item-name"><%= display_name %></span>
		<% if ( new_message ) { %>
		<span class="item-badge"></span>
		<% } %>
	</script>

	<!-- Create Modal Templates -->

	<script id="selectUserTemplate" type="text/html">
		<div class="user-select-avatar">
			<% if ( avatar ) { %>
			<img src="<%= avatar %>"/>
			<% } else { %>
			<img src="assets/images/no_avatar.png"/>
			<% } %>
		</div>
		<p class="subtext text-center"><%= display_name %></p>
		<% if ( selected ) { %>
		<i class="fa fa-check-circle"></i>
		<% } %>
	</script>

	<!-- Main Window Templates -->

	<script id="chatWindowTemplate" type="text/html">
		<div class="chat-window">
			<ul class="conversation">
			<% _.each( messages, function( message ) { %>
				<% if ( message.senderId == current_user.get('id') ) { %>
				<li class="user-text">
				<% } else { %>
				<li class="friend-text">
				<% } %>
					<div class="item-avatar">
					<% if ( user_info[message.senderId] && 
							user_info[message.senderId].avatar ) { %>
						<img src="<%= user_info[message.senderId].avatar %>"/>
					<% } else { %>
						<img src="assets/images/no_avatar.png"/>
					<% } %>
					</div>
					<p class="msg-text"><%= message.message %></p>
					<% if ( message.timestamp ) { %>
					<p class="subtext text-secondary">Sent at <%= message.timestamp %></p>
					<% } %>
				</li>
			<% }); %>
			</ul>
		</div>
		<div class="message-bar">
			<input class="message-input"></input>
			<span class="send-btn btn">Send</span>
		</div>
	</script>

	<script id="profileWindowTemplate" type="text/html">
		<div class="profile-window">
			<div class="profile-avatar">
				<% if ( avatar ) { %>
				<img src="<%= avatar %>"/>
				<% } else { %>
				<img src="assets/images/no_avatar.png"/>
				<% } %>
			</div>
			<h2 class="text-center"><%= display_name %></h2>
			<% if ( id != current_user.get('id') ) { %>
			<button id="profile-new-chat-btn" class="profile-btn btn btn-primary"><i class="fa fa-comments-o"></i> Chat with me</button>
			<% } else { %>
			<button id="profile-logout-btn" class="profile-btn btn btn-default"><i class="fa fa-hand-peace-o"></i> Logout</button>
			<% } %>
		</div>
	</script>

	<!-- END TEMPLATES -->

</body>
</html>